# 5. コメントすべきことを知る

コメントでは書き手の意図を読み手に伝達すること

* コメントするべきでは「ない」ことを知る
* コードを書いているときの自分の考えを記録として残す
* 読み手の立場になって何が必要となるかを考える

## 5-1. コメントするべきでは「ない」こと

以下のようなコメントは不要

* 新しい情報がない
* 読み手が読みやすくなることもない

[![Image from Gyazo](https://i.gyazo.com/5e9a02aedb2ab19ca7aad9c431168b32.png)](https://gyazo.com/5e9a02aedb2ab19ca7aad9c431168b32)

**コメントを読むのにも時間が必要**

**コードからすぐに分かることはコメントに書かない**

### 備考

メソッドの名前が分かりにくい英語のときに日本語のコメントを書くことは有用

### コメントのためのコメントをしない

[![Image from Gyazo](https://i.gyazo.com/d730fcf8e54a26b1253eead0f98ac321.png)](https://gyazo.com/d730fcf8e54a26b1253eead0f98ac321)

### ひどい名前はコメントをつけずに名前を変える

[![Image from Gyazo](https://i.gyazo.com/10942612414d94b5e54b6d8106caa29c.png)](https://gyazo.com/10942612414d94b5e54b6d8106caa29c)

## 5-2. 自分の考えを記録する

**コードを書いている本人の意図を表現することは理解の大きな助けになる**

* コメンタリーを入れる
* 定数にコメントをつける


### 備考: コードの欠陥にコメントをつける

[![Image from Gyazo](https://i.gyazo.com/8ddea5bcbffc9a1955728bee44c1ad66.png)](https://gyazo.com/8ddea5bcbffc9a1955728bee44c1ad66)

## 5-3. 読み手の立場になって考える

**読み手が知りたいことをコメントする**

* 質問されそうなことを想像する
* ハマりそうな罠を告知する
* 「全体像」を示す
* 要約を示す

**読み手が知りたいことをコメントする**

## 5-4. ライターズブロックを乗り越える

**コメントが必要な部分にはとにかくコメントを書きはじめる**

```
// ヤバい。これはリストに重複があったら面倒なことになる。
```

紐解き

* 「ヤバい」は「注意:これには気を付けて」という意味だ。
* 「これ」は「入力を処理するコード」という意味だ。
* 「面倒なことになる」は「実装が難しくなる」という意味だ。

修正後コメント

```
// 注意:このコードはリストの重複を処理できません(実装が難しいので)。
```

振り返り

* 頭のなかにあるコメントをとにかく書き出す。
* コメントを読んで(どちらかと言えば)改善が必要なものを見つける。
* 改善する。

**何度も繰り返すことで習熟していくので経験を積む**


## 5-5. まとめ

### コメントすべきでは「ない」こと
* コードからすぐに抽出できること。
* ひどいコード(例えば、ひどい名前の関数)を補う「補助的なコメント」。 コメントを書くのではなくコードを修正する。

### 記録すべき自分の考え
* なぜコードが他のやり方ではなくこうなっているのか(「監督コメンタリー」)。
* コードの欠陥を TODO: や XXX: などの記法を使って示す。
* 定数の値にまつわる「背景」。
