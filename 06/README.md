# 6. コメントは正確で簡潔に

コメントを正確で簡潔に書くための方法

**コメントは領域に対する情報の比率が高くなければいけない**

## 6-1. コメントを簡潔にしておく

悪い例

```
// int は CategoryType。
// pair の最初の float は 'score'。
// 2 つめは 'weight'。
typedef hash_map<int, pair<float, float> > ScoreMap;
```

良い例

```
// CategoryType -> (score, weight)
typedef hash_map<int, pair<float, float> > ScoreMap;
```

**意味が同じことを長く説明する必要はない**

## 6-2. あいまいな代名詞を避ける

悪い例

```
// データをキャッシュに入れる。ただし、先にそのサイズをチェックする。
```

良い例

```
// データをキャッシュに入れる。ただし、先にデータのサイズをチェックする。
```

全体を書き換えても良い

```
// データが十分に小さければ、それをキャッシュに入れる。
```

**代名詞の数だけ読み手は代名詞の還元を行う**

**なるべく代名詞の還元をさせない**

## 6-3. 歯切れの悪い文章を磨く

悪い例

```
# これまでにクロールした URL かどうかによって優先度を変える。
```

良い例

```
# これまでにクロールしていない URL の優先度を高くする。
```

**直訳したロジックのコメントは洗練の余地がある**

## 6-4. 関数の動作を正確に記述する

悪い例

```
// このファイルに含まれる行数を返す。 
int CountLines(string filename) { ... }
```

良い例

```
// このファイルに含まれる改行文字('\n')を数える。 
int CountLines(string filename) { ... }
```

**コメントから挙動が唯一に解釈できるよう記述する**

### 備考: 「行」によって発生する曖昧さ

「行」という表現は多様な意味を表すことができる

* ""(空のファイル)は、0 行なのか 1 行なのか。
* "hello" は、0 行なのか 1 行なのか。
* "hello\n" は、1 行なのか 2 行なのか。
* "hello\n world" は、1 行なのか 2 行なのか。
* "hello\n\r cruel\n world\r" は、2 行なのか 3 行なのか 4 行なのか。



## 6-5. 入出力のコーナーケースに実例を使う

## 6-6. コードの意図を書く

悪い例

[![Image from Gyazo](https://i.gyazo.com/3e4ba131f09b2d8ce1f6abd653d50c8d.png)](https://gyazo.com/3e4ba131f09b2d8ce1f6abd653d50c8d)

良い例

[![Image from Gyazo](https://i.gyazo.com/e28552dff4d01aac430e3ff2d3903f26.png)](https://gyazo.com/e28552dff4d01aac430e3ff2d3903f26)

## 6-7. 「名前付き引数」コメント



## 6-8. 情報密度の高い言葉を使う

## 6-9. まとめ

**小さな領域にできるだけ情報を詰め込むことで良いコメントになる**

* 複数のものを指す可能性がある「それ」や「これ」などの代名詞を避ける
* 関数の動作はできるだけ正確に説明する
* コメントに含める入出力の実例を慎重に選ぶ
* コードの意図は、詳細レベルではなく、高レベルで記述する
* よくわからない引数にはインラインコメントを使う(例: `Function(/* arg = */ ... )` )
* 多くの意味が詰め込まれた言葉や表現を使って、コメントを簡潔に保つ

